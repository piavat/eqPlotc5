dt <- structure(list(COUNTRY = rep("TALES", 5), DATE = structure(c(1364774400, 1377993600, 1377993700, 1377993800, 1377993900),
class = c("POSIXct", "POSIXt"), tzone = "UTC"),
EQ_PRIMARY = c(8.3, 5.7, 1.1, 3.4, 6.6),  LOCATION_NAME = c("Ankkalinna", "Mordor", "Oz", "Atlantis", "Korvatuntunturi"), LATITUDE = c(38.381, 37.670, 41.789, 43.883, 44.329), LONGITUDE = C(38.381, 37.670, 41.789, 43.883, 44.329)), .Names = c("COUNTRY", "DATE", "EQ_PRIMARY", "LOCATION_NAME", "LATITUDE", "LONGITUDE"), row.names = c(NA, 5L), class = "data.frame")
dt <- structure(list(COUNTRY = rep("TALES", 5),
DATE = structure(c(1364774400, 1377993600, 1377993700, 1377993800, 1377993900),
class = c("POSIXct", "POSIXt"), tzone = "UTC"),
EQ_PRIMARY = c(8.3, 5.7, 1.1, 3.4, 6.6),
LOCATION_NAME = c("Ankkalinna", "Mordor", "Oz", "Atlantis", "Korvatuntunturi"),
LATITUDE = c(38.381, 37.670, 41.789, 43.883, 44.329),
LONGITUDE = C(38.381, 37.670, 41.789, 43.883, 44.329)),
.Names = c("COUNTRY", "DATE", "EQ_PRIMARY", "LOCATION_NAME", "LATITUDE", "LONGITUDE"), row.names = c(NA, 5L), class = "data.frame")
dt <- structure(list(COUNTRY = rep("IHMEMAA", 5),
LOCATION_NAME = c("Ankkalinna", "Mordor", "Oz", "Atlantis", "Korvatuntunturi"),
DATE = structure(c(1364774400, 1377993600, 1377993700, 1377993800, 1377993900),
class = c("POSIXct", "POSIXt"), tzone = "UTC"),
EQ_PRIMARY = c(8.3, 5.7, 1.1, 3.4, 6.6),
LATITUDE = c(38.381, 37.670, 41.789, 43.883, 44.329),
LONGITUDE = C(38.381, 37.670, 41.789, 43.883, 44.329)),
.Names = c("COUNTRY", "DATE", "EQ_PRIMARY", "LOCATION_NAME", "LATITUDE", "LONGITUDE"), row.names = c(NA, 5L), class = "data.frame")
dt <- structure(list(COUNTRY = rep("IHMEMAA", 5),
dt <- structure(list(COUNTRY = rep("IHMEMAA", 5),
LOCATION_NAME = c("Ankkalinna", "Mordor", "Oz", "Atlantis", "Korvatuntunturi"),
DATE = structure(c(1364774400, 1377993600, 1377993700, 1377993800, 1377993900),
class = c("POSIXct", "POSIXt"), tzone = "UTC"),
EQ_PRIMARY = c(8.3, 5.7, 1.1, 3.4, 6.6),
#LATITUDE = c(38.381, 37.670, 41.789, 43.883, 44.329),
# LONGITUDE = C(38.381, 37.670, 41.789, 43.883, 44.329))
,
.Names = c("COUNTRY", "DATE", "EQ_PRIMARY", "LOCATION_NAME", "LATITUDE", "LONGITUDE"), row.names = c(NA, 5L), class = "data.frame")
dt <- structure(list(COUNTRY = rep("IHMEMAA", 5),
LOCATION_NAME = c("Ankkalinna", "Mordor", "Oz", "Atlantis", "Korvatuntunturi"),
DATE = structure(c(1364774400, 1377993600, 1377993700, 1377993800, 1377993900),
class = c("POSIXct", "POSIXt"), tzone = "UTC"),
EQ_PRIMARY = c(8.3, 5.7, 1.1, 3.4, 6.6),
#LATITUDE = c(38.381, 37.670, 41.789, 43.883, 44.329),
# LONGITUDE = C(38.381, 37.670, 41.789, 43.883, 44.329))
,
.Names = c("COUNTRY", "DATE", "EQ_PRIMARY", "LOCATION_NAME", "LATITUDE", "LONGITUDE"), row.names = c(NA, 5L), class = "data.frame")
dt <- structure(list(COUNTRY = rep("IHMEMAA", 5),
DATE = structure(c(1364774400, 1377993600, 1377993700, 1377993800, 1377993900),
EQ_PRIMARY = c(8.3, 5.7, 1.1, 3.4, 6.6),
#LATITUDE = c(38.381, 37.670, 41.789, 43.883, 44.329),
# LONGITUDE = C(38.381, 37.670, 41.789, 43.883, 44.329))
.Names = c("COUNTRY", "DATE", "EQ_PRIMARY", "LOCATION_NAME", "LATITUDE", "LONGITUDE"), row.names = c(NA, 5L), class = "data.frame")
dt <- structure(list(COUNTRY = rep("IHMEMAA", 5),
LOCATION_NAME = c("Ankkalinna", "Mordor", "Oz", "Atlantis", "Korvatuntunturi"),
DATE = structure(c(1364774400, 1377993600, 1377993700, 1377993800, 1377993900),
class = c("POSIXct", "POSIXt"), tzone = "UTC"),
EQ_PRIMARY = c(8.3, 5.7, 1.1, 3.4, 6.6)),
#LATITUDE = c(38.381, 37.670, 41.789, 43.883, 44.329),
# LONGITUDE = C(38.381, 37.670, 41.789, 43.883, 44.329))
.Names = c("COUNTRY", "DATE", "EQ_PRIMARY", "LOCATION_NAME", "LATITUDE", "LONGITUDE"), row.names = c(NA, 5L), class = "data.frame")
dt <- structure(list(COUNTRY = rep("IHMEMAA", 5),
LOCATION_NAME = c("Ankkalinna", "Mordor", "Oz", "Atlantis", "Korvatuntunturi"),
DATE = structure(c(1364774400, 1377993600, 1377993700, 1377993800, 1377993900),
class = c("POSIXct", "POSIXt"), tzone = "UTC"),
EQ_PRIMARY = c(8.3, 5.7, 1.1, 3.4, 6.6)),
#LATITUDE = c(38.381, 37.670, 41.789, 43.883, 44.329),
# LONGITUDE = C(38.381, 37.670, 41.789, 43.883, 44.329))
.Names = c("COUNTRY", "DATE", "EQ_PRIMARY", "LOCATION_NAME", "LATITUDE", "LONGITUDE"), row.names = c(NA, 5L), class = "data.frame")
dt <- structure(list(COUNTRY = rep("IHMEMAA", 5),
LOCATION_NAME = c("Ankkalinna", "Mordor", "Oz", "Atlantis", "Korvatuntunturi"),
DATE = structure(c(1364774400, 1377993600, 1377993700, 1377993800, 1377993900),
class = c("POSIXct", "POSIXt"), tzone = "UTC"),
EQ_PRIMARY = c(8.3, 5.7, 1.1, 3.4, 6.6),
LATITUDE = c(38.381, 37.670, 41.789, 43.883, 44.329),
LONGITUDE = C(38.381, 37.670, 41.789, 43.883, 44.329))
.Names = c("COUNTRY", "DATE", "EQ_PRIMARY", "LOCATION_NAME", "LATITUDE", "LONGITUDE"), row.names = c(NA, 5L), class = "data.frame")
df$LONGITUDE
list(COUNTRY = rep("IHMEMAA", 5),
LOCATION_NAME = c("Ankkalinna", "Mordor", "Oz", "Atlantis", "Korvatuntunturi"),
DATE = structure(c(1364774400, 1377993600, 1377993700, 1377993800, 1377993900),
class = c("POSIXct", "POSIXt"), tzone = "UTC"),
EQ_PRIMARY = c(8.3, 5.7, 1.1, 3.4, 6.6),
LATITUDE = c(38.381, 37.670, 41.789, 43.883, 44.329),
LONGITUDE = C(13.701, 15.267, 14.872, 11.960, 11.450))
list(COUNTRY = rep("IHMEMAA", 5),
LOCATION_NAME = c("Ankkalinna", "Mordor", "Oz", "Atlantis", "Korvatuntunturi"),
DATE = structure(c(1364774400, 1377993600, 1377993700, 1377993800, 1377993900),
class = c("POSIXct", "POSIXt"), tzone = "UTC"),
EQ_PRIMARY = c(8.3, 5.7, 1.1, 3.4, 6.6))
list(COUNTRY = rep("IHMEMAA", 5),
LOCATION_NAME = c("Ankkalinna", "Mordor", "Oz", "Atlantis", "Korvatuntunturi"),
DATE = structure(c(1364774400, 1377993600, 1377993700, 1377993800, 1377993900),
class = c("POSIXct", "POSIXt"), tzone = "UTC"),
EQ_PRIMARY = c(8.3, 5.7, 1.1, 3.4, 6.6),
LATITUDE = c(38.381, 37.670, 41.789, 43.883, 44.329))
list(COUNTRY = rep("IHMEMAA", 5),
LOCATION_NAME = c("Ankkalinna", "Mordor", "Oz", "Atlantis", "Korvatuntunturi"),
DATE = structure(c(1364774400, 1377993600, 1377993700, 1377993800, 1377993900),
class = c("POSIXct", "POSIXt"), tzone = "UTC"),
EQ_PRIMARY = c(8.3, 5.7, 1.1, 3.4, 6.6),
LATITUDE = c(38.381, 37.670, 41.789, 43.883, 44.329),
LONGITUDE = C(13.701, 15.267, 14.872, 11.960, 11.450))
list(COUNTRY = rep("IHMEMAA", 5),
LOCATION_NAME = c("Ankkalinna", "Mordor", "Oz", "Atlantis", "Korvatuntunturi"),
DATE = structure(c(1364774400, 1377993600, 1377993700, 1377993800, 1377993900),
class = c("POSIXct", "POSIXt"), tzone = "UTC"),
EQ_PRIMARY = c(8.3, 5.7, 1.1, 3.4, 6.6),
LATITUDE = c(38.381, 37.670, 41.789, 43.883, 44.329),
LONGITUDE = C(13.701, 15.267, 14.872, 11.960, 11.450))
list(COUNTRY = rep("IHMEMAA", 5),
LOCATION_NAME = c("Ankkalinna", "Mordor", "Oz", "Atlantis", "Korvatuntunturi"),
DATE = structure(c(1364774400, 1377993600, 1377993700, 1377993800, 1377993900),
class = c("POSIXct", "POSIXt"), tzone = "UTC"),
EQ_PRIMARY = c(8.3, 5.7, 1.1, 3.4, 6.6),
LATITUDE = c(38.381, 37.670, 41.789, 43.883, 44.329),
LONGITUDE = C(13.701, 15.267, 14.872, 11.961, 11.451))
C
C
list(COUNTRY = rep("IHMEMAA", 5),
LOCATION_NAME = c("Ankkalinna", "Mordor", "Oz", "Atlantis", "Korvatuntunturi"),
DATE = structure(c(1364774400, 1377993600, 1377993700, 1377993800, 1377993900),
class = c("POSIXct", "POSIXt"), tzone = "UTC"),
EQ_PRIMARY = c(8.3, 5.7, 1.1, 3.4, 6.6),
LATITUDE = c(38.381, 37.670, 41.789, 43.883, 44.329),
LONGITUDE = c(13.701, 15.267, 14.872, 11.961, 11.451))
dt <- structure(list(COUNTRY = rep("IHMEMAA", 5),
LOCATION_NAME = c("Ankkalinna", "Mordor", "Oz", "Atlantis", "Korvatuntunturi"),
DATE = structure(c(1364774400, 1377993600, 1377993700, 1377993800, 1377993900),
class = c("POSIXct", "POSIXt"), tzone = "UTC"),
EQ_PRIMARY = c(8.3, 5.7, 1.1, 3.4, 6.6),
LATITUDE = c(38.381, 37.670, 41.789, 43.883, 44.329),
LONGITUDE = c(13.701, 15.267, 14.872, 11.961, 11.451))
.Names = c("COUNTRY", "DATE", "EQ_PRIMARY", "LOCATION_NAME", "LATITUDE", "LONGITUDE"), row.names = c(NA, 5L), class = "data.frame")
dt <- structure(list(COUNTRY = rep("IHMEMAA", 5),
dt <- structure(list(COUNTRY = rep("IHMEMAA", 5),
LOCATION_NAME = c("Ankkalinna", "Mordor", "Oz", "Atlantis", "Korvatuntunturi"),
DATE = structure(c(1364774400, 1377993600, 1377993700, 1377993800, 1377993900),
class = c("POSIXct", "POSIXt"), tzone = "UTC"),
EQ_PRIMARY = c(8.3, 5.7, 1.1, 3.4, 6.6),
LATITUDE = c(38.381, 37.670, 41.789, 43.883, 44.329),
LONGITUDE = c(13.701, 15.267, 14.872, 11.961, 11.451)),
.Names = c("COUNTRY", "DATE", "EQ_PRIMARY", "LOCATION_NAME", "LATITUDE", "LONGITUDE"), row.names = c(NA, 5L), class = "data.frame")
####
dt <- structure(list(COUNTRY = rep("IHMEMAA", 5),
LOCATION_NAME = c("Ankkalinna", "Mordor", "Oz", "Atlantis", "Korvatuntunturi"),
DATE = structure(c(1364774400, 1377993600, 1377993700, 1377993800, 1377993900),
class = c("POSIXct", "POSIXt"), tzone = "UTC"),
EQ_PRIMARY = c(8.3, 5.7, 1.1, 3.4, 6.6),
LATITUDE = c(38.381, 37.670, 41.789, 43.883, 44.329),
LONGITUDE = c(13.701, 15.267, 14.872, 11.961, 11.451)),
.Names = c("COUNTRY", "DATE", "EQ_PRIMARY", "LOCATION_NAME", "LATITUDE", "LONGITUDE"), row.names = c(NA, 5L), class = "data.frame")
####
dt <- structure(list(COUNTRY = rep("IHMEMAA", 5),
LOCATION_NAME = c("Ankkalinna", "Mordor", "Oz", "Atlantis", "Korvatuntunturi"),
DATE = structure(c(1364774400, 1377993600, 1377993700, 1377993800, 1377993900),
class = c("POSIXct", "POSIXt"), tzone = "UTC"),
EQ_PRIMARY = c(8.3, 5.7, 1.1, 3.4, 6.6),
LATITUDE = c(38.381, 37.670, 41.789, 43.883, 44.329),
LONGITUDE = c(13.701, 15.267, 14.872, 11.961, 11.451)),
.Names = c("COUNTRY", "DATE", "EQ_PRIMARY", "LOCATION_NAME", "LATITUDE", "LONGITUDE"), row.names = c(NA, 5L), class = "data.frame")
####
dt
dt <- structure(list(COUNTRY = rep("MAA", 5),
LOCATION_NAME = c("Ankkalinna", "Mordor", "Oz", "Atlantis", "Korvatuntunturi"),
DATE = structure(c(1364774400, 1377993600, 1377993700, 1377993800, 1377993900),
class = c("POSIXct", "POSIXt"), tzone = "UTC"),
EQ_PRIMARY = c(8.3, 5.7, 1.1, 3.4, 6.6),
LATITUDE = c(38.381, 37.670, 41.789, 43.883, 44.329),
LONGITUDE = c(13.701, 15.267, 14.872, 11.961, 11.451)),
.Names = c("COUNTRY", "DATE", "EQ_PRIMARY", "LOCATION_NAME", "LATITUDE", "LONGITUDE"), row.names = c(NA, 5L), class = "data.frame")
dt
ggplot(dt)
ggplot(dt) +
geom_timeline( aes(x = DATE, y = COUNTRY, size = EQ_PRIMARY, fill = DEATHS)) +
theme_eq
dt <- structure(list(COUNTRY = rep("MAA", 5),
DATE = structure(c(1364774400, 1377993600, 1377993700, 1377993800, 1377993900),
EQ_PRIMARY = c(8.3, 5.7, 1.1, 3.4, 6.6),
LONGITUDE = c(13.701, 15.267, 14.872, 11.961, 11.451),
.Names = c("COUNTRY", "DATE", "EQ_PRIMARY", "LOCATION_NAME", "LATITUDE", "LONGITUDE", "DEATHS"), row.names = c(NA, 5L), class = "data.frame")
dt <- structure(list(COUNTRY = rep("MAA", 5),
LOCATION_NAME = c("Ankkalinna", "Mordor", "Oz", "Atlantis", "Korvatuntunturi"),
DATE = structure(c(1364774400, 1377993600, 1377993700, 1377993800, 1377993900),
class = c("POSIXct", "POSIXt"), tzone = "UTC"),
EQ_PRIMARY = c(8.3, 5.7, 1.1, 3.4, 6.6),
LATITUDE = c(38.381, 37.670, 41.789, 43.883, 44.329),
LONGITUDE = c(13.701, 15.267, 14.872, 11.961, 11.451),
DEATHS = c(4, 55, NA, 2, 78)),
.Names = c("COUNTRY", "DATE", "EQ_PRIMARY", "LOCATION_NAME", "LATITUDE", "LONGITUDE", "DEATHS"), row.names = c(NA, 5L), class = "data.frame")
dt <- structure(list(COUNTRY = rep("MAA", 5),
LOCATION_NAME = c("Ankkalinna", "Mordor", "Oz", "Atlantis", "Korvatuntunturi"),
DATE = structure(c(1364774400, 1377993600, 1377993700, 1377993800, 1377993900),
class = c("POSIXct", "POSIXt"), tzone = "UTC"),
EQ_PRIMARY = c(8.3, 5.7, 1.1, 3.4, 6.6),
LATITUDE = c(38.381, 37.670, 41.789, 43.883, 44.329),
LONGITUDE = c(13.701, 15.267, 14.872, 11.961, 11.451),
DEATHS = c(4, 55, NA, 2, 78)),
.Names = c("COUNTRY", "DATE", "EQ_PRIMARY", "LOCATION_NAME", "LATITUDE", "LONGITUDE", "DEATHS"), row.names = c(NA, 5L), class = "data.frame")
ggplot(dt) +
geom_timeline( aes(x = DATE, y = COUNTRY, size = EQ_PRIMARY, fill = DEATHS)) +
theme_eq
devtools::load_all(".")
ggplot(dt) +
geom_timeline( aes(x = DATE, y = COUNTRY, size = EQ_PRIMARY, fill = DEATHS)) +
theme_eq
require(lubridate)
require(ggplot2)
require(dplyr)
require(grid)
source(paste0(getwd(), "/Module1_cleaning_functions.R"))
source(paste0(getwd(), "/Module2_functions.R"))
source('~/Opiskelu/Kurssit/Coursera/Part 5 Mastering Software Development in R Capstone/eqPlotsC5/R/Module2_functions.R')
ggplot(dt) +
geom_timeline( aes(x = DATE, y = COUNTRY, size = EQ_PRIMARY, fill = DEATHS)) +
theme_eq
dt
dt <- structure(list(COUNTRY = rep("MAA", 5),
LOCATION_NAME = c("Ankkalinna", "Mordor", "Oz", "Atlantis", "Korvatuntunturi"),
DATE = structure(c(1364774400, 1377993600, 1377993700, 1377993800, 1377993900),
class = c("POSIXct", "POSIXt"), tzone = "UTC"),
EQ_PRIMARY = c(8.3, 5.7, 1.1, 3.4, 6.6),
LATITUDE = c(38.381, 37.670, 41.789, 43.883, 44.329),
LONGITUDE = c(13.701, 15.267, 14.872, 11.961, 11.451),
DEATHS = c(4, 55, NA, 2, 78)),
.Names = c("COUNTRY", "LOCATION_NAME", "DATE", "EQ_PRIMARY", "LATITUDE", "LONGITUDE", "DEATHS"), row.names = c(NA, 5L), class = "data.frame")
ggplot(dt) +
geom_timeline( aes(x = DATE, y = COUNTRY, size = EQ_PRIMARY, fill = DEATHS)) +
theme_eq
test_that("geom_timeline data has DATE variable", {
expect_true("DATE" %in% names(timelineplot$data))
})
obj <-  ggplot(dt) +
geom_timeline( aes(x = DATE, y = COUNTRY, size = EQ_PRIMARY, fill = DEATHS)) +
theme_eq
str(obj)
is.null(obj)
obj$layers
obj$theme
obj$theme$title
obj$theme$plot.title
obj$theme$axis.text
obj$data
dt <- structure(list(COUNTRY = rep("MAA", 5),
LOCATION_NAME = c("Ankkalinna", "Mordor", "Oz", "Atlantis", "Korvatuntunturi"),
DATE = structure(c(1364774400, 1378993600, 1377993700, 1477993800, 1387993900),
class = c("POSIXct", "POSIXt"), tzone = "UTC"),
EQ_PRIMARY = c(8.3, 5.7, 1.1, 3.4, 6.6),
LATITUDE = c(38.381, 37.670, 41.789, 43.883, 44.329),
LONGITUDE = c(13.701, 15.267, 14.872, 11.961, 11.451),
DEATHS = c(4, 55, NA, 2, 78)),
.Names = c("COUNTRY", "LOCATION_NAME", "DATE", "EQ_PRIMARY", "LATITUDE", "LONGITUDE", "DEATHS"), row.names = c(NA, 5L), class = "data.frame")
dt
dt <- structure(list(COUNTRY = rep("MAA", 5),
LOCATION_NAME = c("Ankkalinna", "Mordor", "Oz", "Atlantis", "Korvatuntunturi"),
DATE = structure(c(1264774400, 1378993600, 1477993700, 1577993800, 1687993900),
class = c("POSIXct", "POSIXt"), tzone = "UTC"),
EQ_PRIMARY = c(8.3, 5.7, 1.1, 3.4, 6.6),
LATITUDE = c(38.381, 37.670, 41.789, 43.883, 44.329),
LONGITUDE = c(13.701, 15.267, 14.872, 11.961, 11.451),
DEATHS = c(4, 55, NA, 2, 78)),
.Names = c("COUNTRY", "LOCATION_NAME", "DATE", "EQ_PRIMARY", "LATITUDE", "LONGITUDE", "DEATHS"), row.names = c(NA, 5L), class = "data.frame")
dt
ggplot(dt) +
geom_timeline( aes(x = DATE, y = COUNTRY, size = EQ_PRIMARY, fill = DEATHS)) +
theme_eq
ggplot(dt) +
geom_timeline( aes(x = DATE, y = COUNTRY, size = EQ_PRIMARY, fill = DEATHS)) +
geom_timeline_label( aes(x = DATE, y = COUNTRY, label = LOCATION_NAME, n_max = 1, size = EQ_PRIMARY)) +
theme_eq
ggplot(dt) +
geom_timeline( aes(x = DATE, y = COUNTRY, size = EQ_PRIMARY, fill = DEATHS)) +
geom_timeline_label( aes(x = DATE, y = COUNTRY, label = LOCATION_NAME, n_max = 5, size = EQ_PRIMARY)) +
theme_eq
dt <- structure(list(COUNTRY = rep("MAA", 5),
LOCATION_NAME = c("Ankkalinna", "Mordor", "Korvatuntunturi", "Atlantis", "Oz"),
DATE = structure(c(1264774400, 1378993600, 1477993700, 1577993800, 1687993900),
class = c("POSIXct", "POSIXt"), tzone = "UTC"),
EQ_PRIMARY = c(8.3, 5.7, 1.1, 3.4, 6.6),
LATITUDE = c(38.381, 37.670, 41.789, 43.883, 44.329),
LONGITUDE = c(13.701, 15.267, 14.872, 11.961, 11.451),
DEATHS = c(4, 55, NA, 2, 78)),
.Names = c("COUNTRY", "LOCATION_NAME", "DATE", "EQ_PRIMARY", "LATITUDE", "LONGITUDE", "DEATHS"), row.names = c(NA, 5L), class = "data.frame")
ggplot(dt) +
geom_timeline( aes(x = DATE, y = COUNTRY, size = EQ_PRIMARY, fill = DEATHS)) +
geom_timeline_label( aes(x = DATE, y = COUNTRY, label = LOCATION_NAME, n_max = 5, size = EQ_PRIMARY)) +
theme_eq
dt <- structure(list(COUNTRY = rep("MAA", 5),
LOCATION_NAME = c("Ankkalinna", "Mordor", "Korvatuntunturi", "Atlantis", "Oz"),
DATE = structure(c(1264774400, 1378993600, 1477993700, 1577993800, 1687993900),
class = c("POSIXct", "POSIXt"), tzone = "UTC"),
EQ_PRIMARY = c(8.3, 5.7, 1.1, 3.4, 6.6),
LATITUDE = c(38.381, 37.670, 41.789, 43.883, 44.329),
LONGITUDE = c(13.701, 15.267, 14.872, 11.961, 11.451),
DEATHS = c(4, 55, NA, 2, 78)),
.Names = c("COUNTRY", "LOCATION_NAME", "DATE", "EQ_PRIMARY", "LATITUDE", "LONGITUDE", "DEATHS"),
row.names = c(NA, 5L), class = "data.frame")
test_that("geom_timeline data has DATE variable", {
expect_true("DATE" %in% names(dt$data))
})
dt
names(dt$data)
obj <- ggplot(dt) +
geom_timeline( aes(x = DATE, y = COUNTRY, size = EQ_PRIMARY, fill = DEATHS))
names(obj$data)
test_that("geom_timeline data has DATE variable", {
expect_true("DATE" %in% names(obj$data))
})
dt <- structure(list(COUNTRY = rep("MAA", 5),
LOCATION_NAME = c("Ankkalinna", "Mordor", "Korvatuntunturi", "Atlantis", "Oz"),
DATE = structure(c(1264774400, 1378993600, 1477993700, 1577993800, 1687993900),
class = c("POSIXct", "POSIXt"), tzone = "UTC"),
EQ_PRIMARY = c(8.3, 5.7, 1.1, 3.4, 6.6),
LATITUDE = c(38.381, 37.670, 41.789, 43.883, 44.329),
LONGITUDE = c(13.701, 15.267, 14.872, 11.961, 11.451),
DEATHS = c(4, 55, NA, 2, 78)),
.Names = c("COUNTRY", "LOCATION_NAME", "DATE", "EQ_PRIMARY", "LATITUDE", "LONGITUDE", "DEATHS"),
row.names = c(NA, 5L), class = "data.frame")
obj <- ggplot(dt) +
geom_timeline( aes(x = DATE, y = COUNTRY, size = EQ_PRIMARY, fill = DEATHS)) +
geom_timeline_label( aes(x = DATE, y = COUNTRY, label = LOCATION_NAME, n_max = 1, size = EQ_PRIMARY)) +
theme_eq
length(obj$layers)
dt <- structure(list(COUNTRY = rep("MAA", 5),
LOCATION_NAME = c("Ankkalinna", "Mordor", "Korvatuntunturi", "Atlantis", "Oz"),
DATE = structure(c(1264774400, 1378993600, 1477993700, 1577993800, 1687993900),
class = c("POSIXct", "POSIXt"), tzone = "UTC"),
EQ_PRIMARY = c(8.3, 5.7, 1.1, 3.4, 6.6),
LATITUDE = c(38.381, 37.670, 41.789, 43.883, 44.329),
LONGITUDE = c(13.701, 15.267, 14.872, 11.961, 11.451),
DEATHS = c(4, 55, NA, 2, 78)),
.Names = c("COUNTRY", "LOCATION_NAME", "DATE", "EQ_PRIMARY", "LATITUDE", "LONGITUDE", "DEATHS"),
row.names = c(NA, 5L), class = "data.frame")
obj <- ggplot(dt) +
geom_timeline( aes(x = DATE, y = COUNTRY, size = EQ_PRIMARY, fill = DEATHS)) +
geom_timeline_label( aes(x = DATE, y = COUNTRY, label = LOCATION_NAME, n_max = 1, size = EQ_PRIMARY)) +
theme_eq
test_that("geom_timeline_label has two layers", {
expect_true(length(obj$layers) == 2)
})
dt <- structure(list(COUNTRY = rep("MAA", 5),
LOCATION_NAME = c("Ankkalinna", "Mordor", "Korvatuntunturi", "Atlantis", "Oz"),
DATE = structure(c(1264774400, 1378993600, 1477993700, 1577993800, 1687993900),
class = c("POSIXct", "POSIXt"), tzone = "UTC"),
EQ_PRIMARY = c(8.3, 5.7, 1.1, 3.4, 6.6),
LATITUDE = c(38.381, 37.670, 41.789, 43.883, 44.329),
LONGITUDE = c(13.701, 15.267, 14.872, 11.961, 11.451),
DEATHS = c(4, 55, NA, 2, 78)),
.Names = c("COUNTRY", "LOCATION_NAME", "DATE", "EQ_PRIMARY", "LATITUDE", "LONGITUDE", "DEATHS"),
row.names = c(NA, 5L), class = "data.frame")
test_that("latitude is measurable and less than 91 degrees", {
eq_clean_data() %>% select("LATITUDE")
latitude <- max(na.omit(latitude))
expect_lt(latitude, 91)
})
dt <- structure(list(COUNTRY = rep("MAA", 5),
LOCATION_NAME = c("Ankkalinna", "Mordor", "Korvatuntunturi", "Atlantis", "Oz"),
DATE = structure(c(1264774400, 1378993600, 1477993700, 1577993800, 1687993900),
class = c("POSIXct", "POSIXt"), tzone = "UTC"),
EQ_PRIMARY = c(8.3, 5.7, 1.1, 3.4, 6.6),
LATITUDE = c(38.381, 37.670, 41.789, 43.883, 44.329),
LONGITUDE = c(13.701, 15.267, 14.872, 11.961, 11.451),
DEATHS = c(4, 55, NA, 2, 78)),
.Names = c("COUNTRY", "LOCATION_NAME", "DATE", "EQ_PRIMARY", "LATITUDE", "LONGITUDE", "DEATHS"),
row.names = c(NA, 5L), class = "data.frame")
eq_clean_data(dt)
dt <- structure(list(COUNTRY = rep("MAA", 5),
LOCATION_NAME = c("Ankkalinna", "Mordor", "Korvatuntunturi", "Atlantis", "Oz"),
YEAR = c(1899, 1999, 2000, 2011, 2020),
MONTH = c(12, 1, 4, 6, 8),
DAY = c(1, 22, 14, 21, 3),
EQ_PRIMARY = c("8.3", "5.7", "1.1", "3.4", "6.6"),
LATITUDE = c("38.381", "37.670", "41.789", "43.883", "44.329"),
LONGITUDE = c("13.701", "15.267", "14.872", "11.961", "11.451"),
DEATHS = c(4, 55, NA, 2, 78)),
.Names = c("COUNTRY", "LOCATION_NAME", "YEAR", "MONTH", "DAY", "EQ_PRIMARY", "LATITUDE", "LONGITUDE", "DEATHS"),
row.names = c(NA, 5L), class = "data.frame")
test_that("latitude is measurable and less than 91 degrees", {
eq_clean_data(dt) %>% select("LATITUDE")
latitude <- max(na.omit(latitude))
expect_lt(latitude, 91)
})
dt
eq_clean_data(dt)
eq_clean_data(dt) %>% select("LATITUDE")
latitude <- max(na.omit(eq_clean_data(dt) %>% select("LATITUDE")))
latitude
dt <- structure(list(COUNTRY = rep("MAA", 5),
LOCATION_NAME = c("Ankkalinna", "Mordor", "Korvatuntunturi", "Atlantis", "Oz"),
YEAR = c(1899, 1999, 2000, 2011, 2020),
MONTH = c(12, 1, 4, 6, 8),
DAY = c(1, 22, 14, 21, 3),
EQ_PRIMARY = c("8.3", "5.7", "1.1", "3.4", "6.6"),
LATITUDE = c("38.381", "37.670", "41.789", "43.883", "44.329"),
LONGITUDE = c("13.701", "15.267", "14.872", "11.961", "11.451"),
DEATHS = c(4, 55, NA, 2, 78)),
.Names = c("COUNTRY", "LOCATION_NAME", "YEAR", "MONTH", "DAY", "EQ_PRIMARY", "LATITUDE", "LONGITUDE", "DEATHS"),
row.names = c(NA, 5L), class = "data.frame")
test_that("latitude is measurable and less than 91 degrees", {
latitude <- max(na.omit(eq_clean_data(dt) %>% select("LATITUDE")))
expect_lt(latitude, 91)
})
dt <- structure(list(COUNTRY = rep("MAA", 5),
LOCATION_NAME = c("Ankkalinna", "Mordor", "Korvatuntunturi", "Atlantis", "Oz"),
DATE = structure(c(1264774400, 1378993600, 1477993700, 1577993800, 1687993900),
class = c("POSIXct", "POSIXt"), tzone = "UTC"),
EQ_PRIMARY = c(8.3, 5.7, 1.1, 3.4, 6.6),
LATITUDE = c(38.381, 37.670, 41.789, 43.883, 44.329),
LONGITUDE = c(13.701, 15.267, 14.872, 11.961, 11.451),
DEATHS = c(4, 55, NA, 2, 78)),
.Names = c("COUNTRY", "LOCATION_NAME", "DATE", "EQ_PRIMARY", "LATITUDE", "LONGITUDE", "DEATHS"),
row.names = c(NA, 5L), class = "data.frame")
obj <- ggplot(dt) +
geom_timeline( aes(x = DATE, y = COUNTRY, size = EQ_PRIMARY, fill = DEATHS))
test_that("geom_timeline data has DATE variable", {
expect_true("DATE" %in% names(obj$data))
})
dt <- structure(list(COUNTRY = rep("MAA", 5),
LOCATION_NAME = c("Ankkalinna", "Mordor", "Korvatuntunturi", "Atlantis", "Oz"),
YEAR = c(1899, 1999, 2000, 2011, 2020),
MONTH = c(12, 1, 4, 6, 8),
DAY = c(1, 22, 14, 21, 3),
EQ_PRIMARY = c("8.3", "5.7", "1.1", "3.4", "6.6"),
LATITUDE = c("38.381", "37.670", "41.789", "43.883", "44.329"),
LONGITUDE = c("13.701", "15.267", "14.872", "11.961", "11.451"),
DEATHS = c(4, 55, NA, 2, 78)),
.Names = c("COUNTRY", "LOCATION_NAME", "YEAR", "MONTH", "DAY", "EQ_PRIMARY", "LATITUDE", "LONGITUDE", "DEATHS"),
row.names = c(NA, 5L), class = "data.frame")
test_that("latitude is measurable and less than 91 degrees", {
latitude <- max(na.omit(eq_clean_data(dt) %>% select("LATITUDE")))
expect_lt(latitude, 91)
})
mapwithlabel <- readr::read_delim("signif.txt", delim = "\t") %>%
eq_clean_data() %>%
dplyr::filter(COUNTRY == "MEXICO" & lubridate::year(DATE) >= 2000) %>%
dt <- structure(list(COUNTRY = rep("MAA", 5),
LOCATION_NAME = c("Ankkalinna", "Mordor", "Korvatuntunturi", "Atlantis", "Oz"),
DATE = structure(c(1264774400, 1378993600, 1477993700, 1577993800, 1687993900),
class = c("POSIXct", "POSIXt"), tzone = "UTC"),
EQ_PRIMARY = c(8.3, 5.7, 1.1, 3.4, 6.6),
LATITUDE = c(38.381, 37.670, 41.789, 43.883, 44.329),
LONGITUDE = c(13.701, 15.267, 14.872, 11.961, 11.451),
DEATHS = c(4, 55, NA, 2, 78)),
.Names = c("COUNTRY", "LOCATION_NAME", "DATE", "EQ_PRIMARY", "LATITUDE", "LONGITUDE", "DEATHS"),
row.names = c(NA, 5L), class = "data.frame")
dt
dt <- structure(list(COUNTRY = rep("MAA", 5),
LOCATION_NAME = c("Ankkalinna", "Mordor", "Korvatuntunturi", "Atlantis", "Oz"),
DATE = structure(c(1264774400, 1378993600, 1477993700, 1577993800, 1687993900),
class = c("POSIXct", "POSIXt"), tzone = "UTC"),
EQ_PRIMARY = c(8.3, 5.7, 1.1, 3.4, 6.6),
LATITUDE = c(38.381, 37.670, 41.789, 43.883, 44.329),
LONGITUDE = c(13.701, 15.267, 14.872, 11.961, 11.451),
DEATHS = c(4, 55, NA, 2, 78)),
.Names = c("COUNTRY", "LOCATION_NAME", "DATE", "EQ_PRIMARY", "LATITUDE", "LONGITUDE", "DEATHS"),
row.names = c(NA, 5L), class = "data.frame")
dt
eq_map(data = dt, annot_col = "DATE")
mapwithdate
obj <- eq_map(data = dt, annot_col = "DATE")
obj$mapwithdate
obj <- eq_map(data = dt, annot_col = "DATE")
obj
mapwithdate
obj <- eq_map(data = dt, annot_col = "DATE")
obj <- eq_map(data = dt, annot_col = "DATE")
str(obj)
obj$mapwithdate
obj$width
dt <- structure(list(COUNTRY = rep("MAA", 5),
LOCATION_NAME = c("Ankkalinna", "Mordor", "Korvatuntunturi", "Atlantis", "Oz"),
DATE = structure(c(1264774400, 1378993600, 1477993700, 1577993800, 1687993900),
class = c("POSIXct", "POSIXt"), tzone = "UTC"),
EQ_PRIMARY = c(8.3, 5.7, 1.1, 3.4, 6.6),
LATITUDE = c(38.381, 37.670, 41.789, 43.883, 44.329),
LONGITUDE = c(13.701, 15.267, 14.872, 11.961, 11.451),
DEATHS = c(4, 55, NA, 2, 78)),
.Names = c("COUNTRY", "LOCATION_NAME", "DATE", "EQ_PRIMARY", "LATITUDE", "LONGITUDE", "DEATHS"),
row.names = c(NA, 5L), class = "data.frame")
dt
obj <- eq_map(data = dt, annot_col = "DATE")
obj
str(obj)
obj$sizingPolicy
obj$sizingPolicy$defaultWidth
dt <- structure(list(COUNTRY = rep("MAA", 5),
LOCATION_NAME = c("Ankkalinna", "Mordor", "Korvatuntunturi", "Atlantis", "Oz"),
DATE = structure(c(1264774400, 1378993600, 1477993700, 1577993800, 1687993900),
class = c("POSIXct", "POSIXt"), tzone = "UTC"),
EQ_PRIMARY = c(8.3, 5.7, 1.1, 3.4, 6.6),
LATITUDE = c(38.381, 37.670, 41.789, 43.883, 44.329),
LONGITUDE = c(13.701, 15.267, 14.872, 11.961, 11.451),
DEATHS = c(4, 55, NA, 2, 78)),
.Names = c("COUNTRY", "LOCATION_NAME", "DATE", "EQ_PRIMARY", "LATITUDE", "LONGITUDE", "DEATHS"),
row.names = c(NA, 5L), class = "data.frame")
obj <- eq_map(data = dt, annot_col = "DATE")
test_that("map default width is 100%", {
expect_true(obj$sizingPolicy$defaultWidth == "100%")
})
obj$sizingPolicy$defaultWidth
devtools::load_all(".")
library(eqPlotsC5)
devtools::load_all(".")
library(eqPlotsC5)
devtools::load_all(".")
rm(list = c("geom_timeline", "geom_timeline_label", "geomTimeline", "geomTimelineLabel", "theme_eq"))
devtools::load_all(".")
dt <- structure(list(COUNTRY = rep("MAA", 5),
LOCATION_NAME = c("Ankkalinna", "Mordor", "Korvatuntunturi", "Atlantis", "Oz"),
YEAR = c(1899, 1999, 2000, 2011, 2020),
MONTH = c(12, 1, 4, 6, 8),
DAY = c(1, 22, 14, 21, 3),
EQ_PRIMARY = c("8.3", "5.7", "1.1", "3.4", "6.6"),
LATITUDE = c("38.381", "37.670", "41.789", "43.883", "44.329"),
LONGITUDE = c("13.701", "15.267", "14.872", "11.961", "11.451"),
DEATHS = c(4, 55, NA, 2, 78)),
.Names = c("COUNTRY", "LOCATION_NAME", "YEAR", "MONTH", "DAY", "EQ_PRIMARY", "LATITUDE", "LONGITUDE", "DEATHS"),
row.names = c(NA, 5L), class = "data.frame")
eq_clean_data
devtools::load_all(".")
devtools::load_all(".")
